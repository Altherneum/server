<IfModule mod_ssl.c>

<VirtualHost *:*>
    ServerName altherneum.fr
    ServerAlias www.altherneum.fr docs.altherneum.fr wiki.altherneum.fr info.altherneum.fr

    Redirect 301 / https://doc.altherneum.fr/

    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/altherneum.fr/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/altherneum.fr/privkey.pem
</VirtualHost>

<VirtualHost *:*>
    ServerName git.altherneum.fr
    ServerAlias github.altherneum.fr

    Redirect 301 / https://github.com/altherneum/

    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/altherneum.fr/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/altherneum.fr/privkey.pem
</VirtualHost>

<VirtualHost *:*>
    ServerName windows.altherneum.fr
    ServerAlias microsoft.altherneum.fr fuckwindows.altherneum.fr fuckmicrosoft.altherneum.fr

    Redirect 301 / https://www.youtube.com/watch?v=2zpCOYkdvTQ

    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/altherneum.fr/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/altherneum.fr/privkey.pem
</VirtualHost>

<VirtualHost *:*>
    ServerName code.altherneum.fr
    ServerAlias vscode.altherneum.fr

    <Location />
            AuthType Basic
            AuthName "VSCode Login"
            AuthUserFile "/etc/apache2/htpasswd"
            Require valid-user
    </Location>

    SSLEngine on
    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/altherneum.fr/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/altherneum.fr/privkey.pem

    RewriteEngine on
    RewriteCond %{HTTP:Upgrade} websocket [NC]
    RewriteCond %{HTTP:Connection} upgrade [NC]
    RewriteRule ^/?(.*) "ws://localhost:6700/$1" [P,L]

    ProxyRequests On
    ProxyPass / http://localhost:6700/
    ProxyPassReverse / http://localhost:6700/
</VirtualHost>

<VirtualHost *:*>
    ServerName minecraft.altherneum.fr
    ServerAlias play.altherneum.fr mc.altherneum.fr *.altherneum.fr
    ServerAdmin webmaster@altherneum.fr

    DocumentRoot /var/www/html

    ErrorLog ${APACHE_LOG_DIR}/error.log
    CustomLog ${APACHE_LOG_DIR}/access.log combined

    <Directory "/var/www/html">

        Options FollowSymLinks
        AllowOverride All
        Require all granted

    </Directory>

    Include /etc/letsencrypt/options-ssl-apache.conf
    SSLCertificateFile /etc/letsencrypt/live/altherneum.fr/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/altherneum.fr/privkey.pem
</VirtualHost>

</IfModule>
